


##刀塔传奇分享
- 系统模块
《刀塔传奇》的客户端的整体结构：数据模块，网络模块，最大的一块就是业务逻辑模块，里面分UI系统、战斗系统和事件系统。

- 更新：
这边每个数据跟大家分享一下，每次完整包更新的时候，当日的日活跃大概会少10多万。它的优化方案是制作低清版本，解决包大小的问题，还有一个在游戏内准备继承一个下载器的功能，就是在游戏启动过程当中，跟游戏更新包类似，在游戏启动过程当中完成一个全量包的下载和安装，达到优化更新体验的目的。

- 客户端热加载：
我们在脚本层面装了一个热加载的模块，主要用于《刀塔传奇》在运行时来重新加载Lua代码，在游戏运行时我们修改的代码可以立即生效，这样省去了关闭和打开应用程序的时间，节省了开发效率。

- BUG调试：
我们还开发了Debug函数，它可以添加在代码的任意地方，但是函数会在代码的添加地方输出当前的调用堆栈，并进入调试希望环境，在里面输出当中的一些后变量来完成调试。通过这个方式我们可以解决定位比较复杂的大的问题。
还有一个叫XPcall，这是Lua在安全模式上的一个函数，它接收两个参数，一个是执行函数，一个是错误处理函数，我们在脚本的主循环处使用XPcall额调用执行函数，并使用DEBUG作为错误处理函数，一旦脚本抛出异常，使会进入DEBUG的调试模式，同时我们还会弹出一个游戏错误框。

